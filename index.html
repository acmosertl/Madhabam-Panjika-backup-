<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ржорж╛ржзржмржо ржкржЮрзНржЬрж┐ржХрж╛ тАФ Panel One</title>
<style>
  :root{
    --bg:#fff1d6;
    --card:#ffffff;
    --radius:16px;
    --shadow:0 2px 10px rgba(0,0,0,.14);
    --yellow-deep:#ffd740;   /* ржЧрж╛рзЭ рж╣рж▓рзБржж (label) */
    --yellow-soft:#ffe97a;
    --pink:#ff9ee7;
    --red:#d32f2f;
    --fest:#fff59d;
    --festText:#b71c1c;
    --blue1:#1e3a8a; --blue2:#0d1b4c;
  }
  body{margin:0;background:var(--bg);font-family:"Noto Sans Bengali",sans-serif;padding:16px}
  .panel{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:12px 14px;margin:0 auto 14px;max-width:720px}
  /* ржкржЮрзНржЬрж┐ржХрж╛ */
  .panchika{background:linear-gradient(to bottom,var(--yellow-soft),var(--yellow-deep));text-align:center}
  .panchika h2{color:#5c2f00;margin:.4rem 0 .6rem}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .cell{background:var(--pink);border-radius:12px;padding:8px}
  .label{color:#1b1b1b;background:linear-gradient(to right,#fffad1,#ffe97a);display:inline-block;padding:2px 8px;border-radius:6px;font-weight:800}
  .value{display:block;margin-top:6px;font-weight:800;color:#000}
  /* ржПржХрж╛ржжрж╢рзА */
  .eka{background:var(--red);color:#fff;text-align:center}
  .eka h3{margin:.3rem 0 .5rem}
  .eka .name{font-size:1.25rem;font-weight:800}
  .eka .meta{opacity:.9}
  /* ржЗржнрзЗржирзНржЯ */
  .fest{background:var(--fest);color:var(--festText);text-align:center}
  .icon{font-size:1.3em;text-shadow:0 0 9px rgba(255,255,255,.85)}
  /* ржЬрзЛржпрж╝рж╛рж░-ржнрж╛ржЯрж╛ */
  .tide{background:linear-gradient(to bottom,var(--blue1),var(--blue2));color:#fff}
  .tide h3{text-align:center;margin:.4rem 0 .7rem}
  .tide-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .tide-cell{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.28);border-radius:12px;padding:8px}
  .tide-row{display:flex;justify-content:space-between;gap:8px}
  .tide-label{font-weight:800;opacity:.95}
  .tide-val{font-weight:800}
  /* ржкржкржЖржк ржЯрзНрж░рж┐ржЧрж╛рж░ */
  .trigger{background:#FFF8E1;color:#7B1FA2;text-align:center;border-radius:12px;padding:12px;font-weight:800;box-shadow:0 2px 6px rgba(0,0,0,.2);cursor:pointer}
  .trigger:hover{box-shadow:0 0 12px rgba(123,31,162,.4)}
  /* ржЫрзЛржЯ ржбрж┐ржнрж╛ржЗрж╕ */
  @media (max-width:480px){
    .grid{gap:6px}
    .cell{padding:6px}
  }
</style>
</head>
<body>
  <!-- ЁЯкФ ржкржЮрзНржЬрж┐ржХрж╛ -->
  <section class="panel panchika">
    <h2>ЁЯкФ ржкржЮрзНржЬрж┐ржХрж╛</h2>
    <div class="grid">
      <div class="cell"><span class="label">рждрж┐ржерж┐</span><span id="tithi" class="value">тАФ</span></div>
      <div class="cell"><span class="label">ржиржХрзНрж╖рждрзНрж░</span><span id="nakshatra" class="value">тАФ</span></div>
      <div class="cell"><span class="label">рж╕рзВрж░рзНржпрзЛржжржпрж╝</span><span id="sunrise" class="value">тАФ</span></div>
      <div class="cell"><span class="label">рж╕рзВрж░рзНржпрж╛рж╕рзНржд</span><span id="sunset" class="value">тАФ</span></div>
      <div class="cell"><span class="label">ржЪржирзНржжрзНрж░рзЛржжржпрж╝</span><span id="moonrise" class="value">тАФ</span></div>
      <div class="cell"><span class="label">ржЪржирзНржжрзНрж░рж╛рж╕рзНржд</span><span id="moonset" class="value">тАФ</span></div>
    </div>
    <div style="font-size:.9em;margin-top:8px">рж╕рзВрж░рзНржп/ржЪржирзНржжрзНрж░ ржбрж╛ржЯрж╛ рзй ржШржгрзНржЯрж╛ ржЕржирзНрждрж░ рж░рж┐ржлрзНрж░рзЗрж╢</div>
  </section>

  <!-- ЁЯХЙя╕П ржкрж░ржмрж░рзНрждрзА ржПржХрж╛ржжрж╢рзА -->
  <section class="panel eka">
    <h3>ЁЯХЙя╕П ржкрж░ржмрж░рзНрждрзА ржПржХрж╛ржжрж╢рзА</h3>
    <div id="ekaName" class="name">тАФ</div>
    <div id="ekaDate" class="meta">тАФ</div>
    <div id="ekaDays" class="meta">тАФ</div>
  </section>

  <!-- ЁЯУг ржЖрж╕ржирзНржи ржЙрзОрж╕ржм (placeholder demo) -->
  <section class="panel fest">
    <div class="icon">ЁЯУг</div>
    <div><b>ржЖрж╕ржирзНржи ржЙрзОрж╕ржм:</b> ржЧрзАрждрж╛ ржЬржпрж╝ржирзНрждрзА</div>
    <div>рзйрзи ржжрж┐ржи ржкрж░</div>
  </section>

  <!-- ЁЯМК ржЬрзЛржпрж╝рж╛рж░-ржнрж╛ржЯрж╛ (рзи ржЬрзЛржпрж╝рж╛рж░ + рзи ржнрж╛ржЯрж╛) -->
  <section class="panel tide">
    <h3>ЁЯМК ржЖржЬржХрзЗрж░ ржЬрзЛржпрж╝рж╛рж░-ржнрж╛ржЯрж╛</h3>
    <div class="tide-grid">
      <div class="tide-cell"><div class="tide-row"><span class="tide-label">ржЙржЪрзНржЪ ржЬрзЛржпрж╝рж╛рж░ рзз</span><span id="th1" class="tide-val">тАФ</span></div></div>
      <div class="tide-cell"><div class="tide-row"><span class="tide-label">ржЙржЪрзНржЪ ржЬрзЛржпрж╝рж╛рж░ рзи</span><span id="th2" class="tide-val">тАФ</span></div></div>
      <div class="tide-cell"><div class="tide-row"><span class="tide-label">ржирж┐ржорзНржи ржнрж╛ржЯрж╛ рзз</span><span id="tl1" class="tide-val">тАФ</span></div></div>
      <div class="tide-cell"><div class="tide-row"><span class="tide-label">ржирж┐ржорзНржи ржнрж╛ржЯрж╛ рзи</span><span id="tl2" class="tide-val">тАФ</span></div></div>
    </div>
  </section>

  <!-- ЁЯУЕ Popup Calendar Trigger (placeholder URL/data-hook) -->
  <section class="panel trigger" id="calendarTrigger" data-popup="madhabam-fullcalendar" data-href="/calendar">
    ЁЯУЕ рж╕ржорзНржкрзВрж░рзНржг рж╣рж┐ржирзНржжрзБ ржкржЮрзНржЬрж┐ржХрж╛ ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░ ржжрзЗржЦрзБржи
  </section>

<script>
(async function(){
  try{
    const res = await fetch('/api/panchika', { cache: 'no-store' });
    const d = await res.json();

    // ржкржЮрзНржЬрж┐ржХрж╛
    set('tithi', d.tithi); set('nakshatra', d.nakshatra);
    set('sunrise', d.sunrise); set('sunset', d.sunset);
    set('moonrise', d.moonrise); set('moonset', d.moonset);

    // ржПржХрж╛ржжрж╢рзА
    if (d.ekadashi){
      set('ekaName', d.ekadashi.name || 'тАФ');
      set('ekaDate', d.ekadashi.date ? 'ЁЯУЕ '+d.ekadashi.date : 'тАФ');
      set('ekaDays', (typeof d.ekadashi.days_left==='number') ? `тП│ ${d.ekadashi.days_left} ржжрж┐ржи ржмрж╛ржХрж┐` : 'тАФ');
    }

    // ржЬрзЛржпрж╝рж╛рж░-ржнрж╛ржЯрж╛ (рзи High, рзи Low) тАУ ржпржжрж┐ рж▓рзЗржмрзЗрж▓/ржЕрж░рзНржбрж╛рж░ ржирж╛ ржЖрж╕рзЗ, ржкрзНрж▓рзЗрж╕рж╣рзЛрж▓рзНржбрж╛рж░ ржжрзЗржЦрж╛ржмрзЗ
    const T = (d.tide || []);
    set('th1', T[0]?.time || 'тАФ');
    set('th2', T[1]?.time || 'тАФ');
    set('tl1', T[2]?.time || 'тАФ');
    set('tl2', T[3]?.time || 'тАФ');
  }catch(e){ console.error(e); }

  // popup trigger placeholder (future modal hook)
  const trg = document.getElementById('calendarTrigger');
  trg.addEventListener('click', () => {
    // later: open modal with id from data-popup
    alert('Popup Calendar placeholder active. Hook: '+ trg.dataset.popup +' | href: '+ trg.dataset.href);
  });

  function set(id, v){ document.getElementById(id).textContent = v ?? 'тАФ'; }
})();
</script>
</body>
</html>
