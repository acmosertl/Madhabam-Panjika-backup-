<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ü™î ‡¶Æ‡¶æ‡¶ß‡¶¨‡¶Æ ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ vC2</title>
<style>
:root{
  --bg:#fff4e3;--card:#fff8ee;--pink:#f6a9d6;--deep:#0d2a68;
  --red:#c62828;--gold:#ffd740;--label:#4527a0;--glow:#52ff8f;
  --shadow:0 6px 16px rgba(0,0,0,.12);
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);font-family:"Noto Sans Bengali",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:#1a1a1a}
.wrap{max-width:860px;margin:14px auto;padding:8px}
.card{background:var(--card);border-radius:22px;padding:16px;margin:12px;box-shadow:var(--shadow)}
.title{font-weight:800;font-size:22px;text-align:center;margin-bottom:10px}
.grid{display:grid;gap:12px}
.grid-2{grid-template-columns:1fr 1fr}
.pill{background:var(--pink);border-radius:16px;padding:14px}
.label{color:var(--label);font-weight:800;margin-bottom:6px}
.value{font-weight:900;font-size:26px;line-height:1.15}
.sub{font-size:14px;opacity:.9;margin-top:6px}

/* Ekadashi */
.eka{background:var(--red);color:#fff;text-align:center}
.eka-name{color:var(--gold);font-size:40px;font-weight:900;letter-spacing:.5px;
  text-shadow:0 0 12px #ffd740c9,0 0 26px #ffecb3a8;}
.eka-meta{font-size:18px;font-weight:700;margin-top:6px}

/* Upcoming festival ‚Äì bigger */
.up{background:#ffe895;text-align:center;color:#b71c1c}
.up .name{font-weight:900;font-size:28px;margin-bottom:6px}
.up .meta{font-weight:800;font-size:20px}

/* Tide ‚Äì split into two full-width blocks */
.tideWrap{display:grid;gap:12px}
.tideBlock{background:linear-gradient(180deg,#183a8a,#0b2257);color:#fff;border-radius:20px;padding:14px}
.tideBlock .tHead{font-size:20px;font-weight:900;text-align:center;margin-bottom:10px}
.tideGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.tCell{background:rgba(255,255,255,.1);border-radius:14px;padding:12px;text-align:center}
.tLab{color:#fff;font-weight:800;margin-bottom:2px}
.tVal{font-weight:900;font-size:22px;color:var(--glow);text-shadow:0 0 10px rgba(82,255,143,.55)}
.kFooter{margin-top:10px;text-align:center}
.kolkata{color:#ffe082;font-weight:900;font-size:18px}
.kTime{color:var(--glow);font-weight:900;margin-top:4px}

/* AM/PM smaller than digits */
.time{font-weight:900}
.time .ampm{font-size:.8em;vertical-align:baseline;margin-left:4px}

/* Small helpers */
.sep{opacity:.5;margin:0 6px}
</style>
</head>
<body>
<div class="wrap">

  <!-- ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ -->
  <section class="card">
    <div class="title">ü™î ‡¶™‡¶û‡ßç‡¶ú‡¶ø‡¶ï‡¶æ</div>

    <div class="grid">
      <div class="pill">
        <div class="label">‡¶§‡¶ø‡¶•‡¶ø</div>
        <div class="value" id="tithi">‚Äî</div>
        <div class="sub"><span id="tithiEnds">‡¶∂‡ßá‡¶∑: ‚Äî</span> <span class="sep">‚Ä¢</span> <span id="tithiNext">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ: ‚Äî</span></div>
      </div>
      <div class="pill">
        <div class="label">‡¶™‡¶ï‡ßç‡¶∑</div>
        <div class="value" id="paksha">‚Äî</div>
      </div>
      <div class="pill">
        <div class="label">‡¶®‡¶ï‡ßç‡¶∑‡¶§‡ßç‡¶∞</div>
        <div class="value" id="nakshatra">‚Äî</div>
        <div class="sub"><span id="nEnd">‡¶∂‡ßá‡¶∑: ‚Äî</span> <span class="sep">‚Ä¢</span> <span id="nNext">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ: ‚Äî</span></div>
      </div>
    </div>

    <div class="grid grid-2" style="margin-top:12px">
      <div class="pill"><div class="label">‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßã‡¶¶‡¶Ø‡¶º</div><div class="value time" id="sunrise">‚Äî</div></div>
      <div class="pill"><div class="label">‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡¶æ‡¶∏‡ßç‡¶§</div><div class="value time" id="sunset">‚Äî</div></div>
      <div class="pill"><div class="label">‡¶ö‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßã‡¶¶‡¶Ø‡¶º</div><div class="value time" id="moonrise">‚Äî</div></div>
      <div class="pill"><div class="label">‡¶ö‡¶®‡ßç‡¶¶‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶§</div><div class="value time" id="moonset">‚Äî</div></div>
    </div>
  </section>

  <!-- ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ -->
  <section class="card eka">
    <div class="title">üåº ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ</div>
    <div class="eka-name" id="ekaName">‚Äî</div>
    <div class="eka-meta" id="ekaDate">‚Äî</div>
    <div class="eka-meta" id="ekaLeft">‚Äî ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø</div>
  </section>

  <!-- ‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶â‡ßé‡¶∏‡¶¨ -->
  <section class="card up">
    <div class="name" id="festName">üì£ ‚Äî</div>
    <div class="meta" id="festDate">‚Äî</div>
  </section>

  <!-- ‡¶ú‡ßã‡¶Ø‡¶º‡¶æ‡¶∞/‡¶≠‡¶æ‡¶ü‡¶æ ‚Äì ‡¶¶‡ßÅ‡¶á ‡¶´‡ßÅ‡¶≤-‡¶â‡¶á‡¶°‡¶• ‡¶ï‡¶æ‡¶∞‡ßç‡¶° -->
  <section class="tideWrap">
    <div class="tideBlock">
      <div class="tHead">üåä ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ú‡ßã‡¶Ø‡¶º‡¶æ‡¶∞</div>
      <div class="tideGrid">
        <div class="tCell">
          <div class="tLab">‡¶â‡¶ö‡ßç‡¶ö ‡¶ú‡ßã‡¶Ø‡¶º‡¶æ‡¶∞ ‡ßß</div>
          <div class="tVal time" id="tj1">‚Äî</div>
        </div>
        <div class="tCell">
          <div class="tLab">‡¶â‡¶ö‡ßç‡¶ö ‡¶ú‡ßã‡¶Ø‡¶º‡¶æ‡¶∞ ‡ß®</div>
          <div class="tVal time" id="tj2">‚Äî</div>
        </div>
      </div>
      <div class="kFooter">
        <div class="kolkata">üïí ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ</div>
        <div class="kTime time" id="kTimeJ">‚Äî</div>
      </div>
    </div>

    <div class="tideBlock">
      <div class="tHead">üåä ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≠‡¶æ‡¶ü‡¶æ</div>
      <div class="tideGrid">
        <div class="tCell">
          <div class="tLab">‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶≠‡¶æ‡¶ü‡¶æ ‡ßß</div>
          <div class="tVal time" id="tv1">‚Äî</div>
        </div>
        <div class="tCell">
          <div class="tLab">‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶≠‡¶æ‡¶ü‡¶æ ‡ß®</div>
          <div class="tVal time" id="tv2">‚Äî</div>
        </div>
      </div>
      <div class="kFooter">
        <div class="kolkata">üïí ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ</div>
        <div class="kTime time" id="kTimeV">‚Äî</div>
      </div>
    </div>
  </section>

</div>

<script>
/* AM/PM ‡¶õ‡ßã‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ helper */
function stylizeTime(el, raw){
  if(!raw){ el.textContent = '‚Äî'; return; }
  const parts = raw.trim().split(/\s+/);
  const ampm = parts.pop();
  const hhmm = parts.join(' ');
  el.innerHTML = `${hhmm} <span class="ampm">${ampm}</span>`;
}
function bn(n){return ("‡ß¶‡ßß‡ß®‡ß©‡ß™‡ß´‡ß¨‡ß≠‡ßÆ‡ßØ")[n]||n;}
function bengaliTime(now){
  const h=now.getHours(), m=now.getMinutes(), s=now.getSeconds();
  const ampm = h>=12?'PM':'AM';
  const hr=((h+11)%12)+1;
  return `${bn(hr)}:${bn(Math.floor(m/10))}${bn(m%10)}:${bn(Math.floor(s/10))}${bn(s%10)} <span class="ampm">${ampm}</span>`;
}

(async()=>{
  const j = await fetch('/api/panchika').then(r=>r.json());

  // Panchika
  document.getElementById('tithi').textContent = j.tithi.current;
  document.getElementById('tithiEnds').textContent = '‡¶∂‡ßá‡¶∑: '+(j.tithi.ends_at||'‚Äî');
  document.getElementById('tithiNext').textContent = '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ: '+(j.tithi.next||'‚Äî');

  document.getElementById('paksha').textContent = j.paksha||'‚Äî';

  document.getElementById('nakshatra').textContent = j.nakshatra.current;
  document.getElementById('nEnd').textContent = '‡¶∂‡ßá‡¶∑: '+(j.nakshatra.ends_at||'‚Äî');
  document.getElementById('nNext').textContent = '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ: '+(j.nakshatra.next||'‚Äî');

  stylizeTime(document.getElementById('sunrise'), j.sunrise);
  stylizeTime(document.getElementById('sunset'),  j.sunset);
  stylizeTime(document.getElementById('moonrise'),j.moonrise);
  stylizeTime(document.getElementById('moonset'), j.moonset);

  // Ekadashi
  document.getElementById('ekaName').textContent = j.ekadashi.name;
  document.getElementById('ekaDate').textContent = j.ekadashi.date;
  document.getElementById('ekaLeft').textContent = j.ekadashi.days_left+' ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø';

  // Festival
  document.getElementById('festName').textContent = 'üì£ '+j.festival.name;
  document.getElementById('festDate').textContent = j.festival.date+' ‚Ä¢ '+j.festival.days_left+' ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞‡ßá';

  // Tide (Kolkata-lock)
  stylizeTime(document.getElementById('tj1'), j.tide[0]?.time);
  stylizeTime(document.getElementById('tj2'), j.tide[1]?.time);
  stylizeTime(document.getElementById('tv1'), j.tide[2]?.time);
  stylizeTime(document.getElementById('tv2'), j.tide[3]?.time);

  // Kolkata live time on both tide cards
  function tick(){
    const now = new Date();
    const t = bengaliTime(now);
    document.getElementById('kTimeJ').innerHTML = t;
    document.getElementById('kTimeV').innerHTML = t;
  }
  tick(); setInterval(tick,1000);
})();
</script>
</body>
</html>
